##
# FreeNAS Website
##

server {
	listen 80 default_server;
	listen [::]:80 default_server ipv6only=on;

	#root /var/www/freenasUI;
	#index index.html index.htm;

	# Make site accessible from http://localhost/
	server_name localhost;

    location / {
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:9042;
        fastcgi_pass_header Authorization;
        fastcgi_intercept_errors off;
        fastcgi_read_timeout 600m;
        #fastcgi_temp_path /var/tmp/firmware;

        # track uploads in the 'proxied' zone
        # remember connections for 30s after they finished
        ##track_uploads proxied 30s;
    }

    #location /progress {
    #    # report uploads tracked in the 'proxied' zone
    #    report_uploads proxied;
    #}

    location /dojango {
        alias /var/www/freenasUI/dojango;
    }

    location /static {
        alias /var/www/freenasUI/static;
    }

    #location /reporting/graphs {
    #    alias /var/db/graphs;
    #}

    location /dojango/dojo-media/release/1.9.2 {
        alias /var/www/dojo;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /var/www/nginx-dist;
    }

    include plugins.conf;

}


# another virtual host using mix of IP-, name-, and port-based configuration
#
#server {
#	listen 8000;
#	listen somename:8080;
#	server_name somename alias another.alias;
#	root html;
#	index index.html index.htm;
#
#	location / {
#		try_files $uri $uri/ =404;
#	}
#}


# HTTPS server
#
#server {
#	listen 443;
#	server_name localhost;
#
#	root html;
#	index index.html index.htm;
#
#	ssl on;
#	ssl_certificate cert.pem;
#	ssl_certificate_key cert.key;
#
#	ssl_session_timeout 5m;
#
#	ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
#	ssl_ciphers "HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES";
#	ssl_prefer_server_ciphers on;
#
#	location / {
#		try_files $uri $uri/ =404;
#	}
#}
